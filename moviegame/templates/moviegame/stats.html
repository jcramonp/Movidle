{% extends "moviegame/base.html" %}
{% load i18n %}
{% block title %}Estadísticas • Movidle{% endblock %}

{% block content %}
<div class="container">
  <div class="card red stats-card">
    <div class="stats-head">
      <h1>{% blocktrans %}Estadísticas de {{ request.user.username }}{% endblocktrans %}</h1>
      <span class="chip">{% trans "Últimos 30 días" %}</span>
    </div>

    <div class="stat-grid">
      <div class="stat-item">
        <span class="stat-label">{% trans "Ganadas" %}</span>
        <span class="stat-value">{{ ganadas }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">{% trans "Perdidas" %}</span>
        <span class="stat-value">{{ perdidas }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">{% trans "Racha actual" %}</span>
        <span class="stat-value">{{ jugador.racha_actual }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">{% trans "Racha máxima" %}</span>
        <span class="stat-value">{{ jugador.racha_maxima }}</span>
      </div>
    </div>

    <h2 class="dist-title">{% trans "Distribución de intentos (victorias)" %}</h2>

    {% if distribucion %}
      <ul class="dist-list">
        {% for item in distribucion %}
          <li class="dist-row">
            <span class="dist-try">
              {% blocktrans with n=item.numero_intento %}Intento {{ n }}{% endblocktrans %}
            </span>
            <span class="dist-bar" style="--pct: {{ item.cnt }};"></span>
            <span class="dist-count">{{ item.cnt }}</span>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="muted">{% trans "Aún no hay victorias registradas." %}</p>
    {% endif %}
  </div>
</div>
{% endblock %}

